import matplotlib.pyplot as plt

from gesture.gesture_types import Gesture, GestureDatabase

hardcoded_gestures = {
    "horizontal_line": [
        [
            (954867110306, -123.26371002197266, 156.8661346435547, 7.296515941619873),
            (954867119666, -114.97282409667969, 157.24542236328125, 7.282413482666016),
            (954867129269, -106.21112823486328, 157.78964233398438, 7.262205123901367),
            (954867138735, -97.42820739746094, 158.4785919189453, 7.463176727294922),
            (954867148061, -88.49407958984375, 159.24441528320312, 7.5791730880737305),
            (954867157405, -79.42413330078125, 159.9616241455078, 7.894035339355469),
            (954867166756, -70.28562927246094, 160.67808532714844, 8.145625114440918),
            (954867176298, -60.885826110839844, 161.50917053222656, 8.456357955932617),
            (954867185714, -51.66809844970703, 162.16421508789062, 8.649950981140137),
            (954867194996, -42.52167510986328, 162.96585083007812, 8.874192237854004),
            (954867204505, -33.03365707397461, 163.635009765625, 9.048633575439453),
            (954867213801, -23.73241424560547, 164.62098693847656, 9.386923789978027),
            (954867223627, -14.064927101135254, 165.47677612304688, 9.606176376342773),
            (954867232995, -4.8850507736206055, 166.3659210205078, 9.893467903137207),
            (954867242429, 4.556014537811279, 167.48655700683594, 10.324793815612793),
            (954867251519, 13.721752166748047, 168.45269775390625, 10.796810150146484),
            (954867261145, 23.45273780822754, 169.73768615722656, 10.990466117858887),
            (954867270710, 33.11484909057617, 171.17234802246094, 11.639691352844238),
            (954867280097, 42.45625305175781, 172.45343017578125, 12.135844230651855),
            (954867289932, 52.2796516418457, 173.59620666503906, 12.69682502746582),
            (954867298973, 61.64540481567383, 174.75633239746094, 13.540870666503906),
            (954867308270, 71.26793670654297, 175.51014709472656, 14.738598823547363),
            (954867318047, 81.4015884399414, 176.42945861816406, 16.216800689697266),
            (954867326858, 90.4379653930664, 177.088623046875, 17.86937713623047),
            (954867336345, 100.18207550048828, 177.6905517578125, 19.796220779418945),
            (954867346213, 109.79528045654297, 178.07833862304688, 21.26166343688965),
            (954867355690, 118.8973159790039, 178.7698516845703, 22.55181121826172),
            (954867364781, 127.61434173583984, 179.3712921142578, 23.74025535583496),
            (954867374225, 136.50503540039062, 179.82354736328125, 25.102317810058594),
            (954867383539, 145.15843200683594, 180.11509704589844, 26.396087646484375),
            (954867393082, 154.27293395996094, 180.8037567138672, 28.081974029541016),
            (954867402710, 163.27145385742188, 181.56704711914062, 29.6986141204834),
            (954867412141, 171.748291015625, 182.06570434570312, 31.183921813964844),
            (954867421565, 179.69879150390625, 182.21282958984375, 32.56229782104492),
            (954867430960, 187.70162963867188, 182.66075134277344, 33.94643783569336),
            (954867440404, 195.49655151367188, 183.27896118164062, 35.20459747314453),
            (954867449573, 203.0704345703125, 183.7223358154297, 36.471534729003906),
            (954867459266, 211.65147399902344, 184.38946533203125, 38.68856430053711),
        ]
    ],
    "circle": [
        [
            (956146760939, -0.7125376462936401, 359.49169921875, -14.30164623260498),
            (956146770777, 3.963207244873047, 359.18572998046875, -14.337011337280273),
            (956146780822, 8.78270435333252, 358.7869567871094, -14.331198692321777),
            (956146790679, 13.60814094543457, 358.328369140625, -14.443574905395508),
            (956146800929, 18.779027938842773, 357.77069091796875, -14.657814025878906),
            (956146810461, 23.639434814453125, 356.7118225097656, -14.529601097106934),
            (956146820077, 28.798969268798828, 355.134521484375, -14.432700157165527),
            (956146830106, 34.04792404174805, 353.372802734375, -14.390707969665527),
            (956146839568, 39.02816390991211, 351.0479431152344, -14.51501178741455),
            (956146849755, 44.37807083129883, 348.3136291503906, -14.608832359313965),
            (956146859450, 49.5167236328125, 345.6236877441406, -14.51991081237793),
            (956146869096, 54.7222785949707, 342.6343688964844, -14.337053298950195),
            (956146879194, 60.0178337097168, 338.84478759765625, -14.148463249206543),
            (956146888933, 65.25318908691406, 335.57354736328125, -13.931983947753906),
            (956146898663, 70.57183074951172, 332.39337158203125, -13.570028305053711),
            (956146908675, 75.28453826904297, 327.26666259765625, -12.94849681854248),
            (956146918789, 80.1907730102539, 322.5527038574219, -12.23888111114502),
            (956146928400, 84.82849884033203, 317.6778564453125, -11.727381706237793),
            (956146938010, 89.20796203613281, 312.0783386230469, -11.239044189453125),
            (956146947922, 93.49417877197266, 305.9277038574219, -10.644686698913574),
            (956146957726, 97.69880676269531, 299.88623046875, -9.96308708190918),
            (956146967777, 101.8249740600586, 293.5083923339844, -9.251143455505371),
            (956146977450, 105.50016021728516, 287.0755615234375, -8.425888061523438),
            (956146987239, 108.92582702636719, 279.9923095703125, -7.708074569702148),
            (956146997212, 112.3313217163086, 272.7840270996094, -6.984538555145264),
            (956147006801, 115.50248718261719, 265.8668518066406, -6.301907062530518),
            (956147016868, 118.18152618408203, 258.2054443359375, -5.659369468688965),
            (956147026479, 120.4366683959961, 250.70738220214844, -4.987668037414551),
            (956147036442, 122.50269317626953, 243.06893920898438, -4.297957897186279),
            (956147046171, 124.44257354736328, 235.73085021972656, -3.5113420486450195),
            (956147056391, 126.1475601196289, 227.88458251953125, -2.698528289794922),
            (956147065853, 127.24169921875, 220.4066619873047, -1.870575189590454),
            (956147075796, 128.2357635498047, 212.64736938476562, -0.9475920796394348),
            (956147085861, 128.9371795654297, 204.84335327148438, -0.09443558752536774),
            (956147095469, 129.24855041503906, 197.21827697753906, 0.5789243578910828),
            (956147105448, 129.37319946289062, 189.5790252685547, 1.3667430877685547),
            (956147115197, 129.32017517089844, 182.20779418945312, 2.433384895324707),
            (956147124849, 128.69461059570312, 174.7791748046875, 3.966360330581665),
            (956147134962, 127.900634765625, 167.19622802734375, 5.030967712402344),
            (956147144544, 127.13521575927734, 160.55125427246094, 5.600535869598389),
            (956147154701, 125.87560272216797, 153.49742126464844, 6.370151042938232),
            (956147164456, 124.26042175292969, 146.98574829101562, 7.159045696258545),
            (956147173950, 122.19696807861328, 140.6248779296875, 7.81574821472168),
            (956147184144, 119.6806640625, 134.2044677734375, 8.63370418548584),
            (956147193949, 117.09567260742188, 128.33250427246094, 9.278420448303223),
            (956147203820, 114.23981475830078, 122.9367446899414, 9.818167686462402),
            (956147213745, 110.66824340820312, 117.41407775878906, 10.190593719482422),
            (956147223192, 106.9557113647461, 112.4250717163086, 10.932865142822266),
            (956147232981, 102.72281646728516, 107.53927612304688, 11.734536170959473),
            (956147242880, 98.31828308105469, 103.03758239746094, 12.041836738586426),
            (956147252643, 93.53873443603516, 98.68022918701172, 12.46986198425293),
            (956147262496, 88.5501708984375, 94.79650115966797, 12.653182983398438),
            (956147272334, 83.3885726928711, 91.09318542480469, 13.093698501586914),
            (956147282182, 78.1561508178711, 87.67677307128906, 13.476523399353027),
            (956147292044, 72.67322540283203, 84.50967407226562, 13.65932559967041),
            (956147301865, 67.14250946044922, 81.71713256835938, 13.743803977966309),
            (956147311753, 61.774078369140625, 77.16090393066406, 13.955914497375488),
            (956147321719, 56.211875915527344, 75.23334503173828, 13.876465797424316),
            (956147331415, 50.54411697387695, 73.31222534179688, 13.958134651184082),
            (956147341413, 44.34951400756836, 71.41931915283203, 13.87480354309082),
            (956147351070, 38.45783996582031, 68.92573547363281, 13.813064575195312),
            (956147360905, 32.549034118652344, 66.94251251220703, 13.5787935256958),
            (956147370736, 26.131500244140625, 66.29180145263672, 12.984254837036133),
            (956147380639, 19.348896026611328, 65.64851379394531, 12.45920181274414),
            (956147390342, 12.622126579284668, 65.34479522705078, 11.808307647705078),
            (956147400253, 5.927520275115967, 65.38758087158203, 11.36032772064209),
            (956147410315, -0.8030198812484741, 65.6634750366211, 10.131248474121094),
            (956147420115, -7.623834133148193, 66.31603240966797, 9.461578369140625),
            (956147429734, -14.251285552978516, 67.13703918457031, 9.085997581481934),
            (956147439647, -20.410945892333984, 68.41048431396484, 8.073847770690918),
            (956147450070, -26.67730712890625, 69.62779998779297, 6.799683094024658),
            (956147459687, -33.23296356201172, 71.59843444824219, 5.961759090423584),
            (956147469549, -38.59646987915039, 74.54239654541016, 4.272697925567627),
            (956147479151, -44.19272232055664, 77.50668334960938, 1.3209329843521118),
            (956147488915, -48.45340347290039, 80.2096176147461, -0.03828437626361847),
            (956147498861, -52.80039596557617, 84.30427551269531, 0.1697237342596054),
            (956147508823, -57.070064544677734, 89.50422668457031, 0.9029200673103333),
            (956147518534, -61.6019287109375, 93.7159423828125, 0.4092332720756531),
            (956147528392, -65.51776885986328, 99.357177734375, -0.4318898618221283),
            (956147537921, -71.19638061523438, 106.2191162109375, -2.870772361755371),
            (956147547851, -74.67131042480469, 112.26590728759766, -3.664715051651001),
            (956147557734, -79.5816421508789, 119.3003158569336, -5.650083065032959),
            (956147567831, -83.02056884765625, 125.8837661743164, -7.168750762939453),
            (956147577518, -86.81642150878906, 132.45574951171875, -9.841255187988281),
            (956147587694, -90.55197143554688, 140.63134765625, -10.222532272338867),
            (956147597035, -93.17620086669922, 147.00625610351562, -12.088371276855469),
            (956147606733, -95.8264389038086, 153.87535095214844, -13.066315650939941),
            (956147616568, -97.4471664428711, 160.65264892578125, -14.205453872680664),
            (956147626477, -100.447021484375, 168.6270751953125, -16.174657821655273),
            (956147636349, -102.76004028320312, 176.06546020507812, -17.955684661865234),
            (956147646130, -105.05382537841797, 183.64671325683594, -19.976390838623047),
            (956147656010, -106.62741088867188, 191.28846740722656, -21.65934181213379),
            (956147666463, -107.62818908691406, 199.14596557617188, -22.862459182739258),
            (956147675950, -108.47151184082031, 206.5203857421875, -24.155616760253906),
            (956147685801, -108.83744049072266, 213.9488983154297, -25.629226684570312),
            (956147695370, -108.40254211425781, 220.6635284423828, -26.57803726196289),
            (956147705666, -108.36592102050781, 228.14950561523438, -27.957427978515625),
            (956147715293, -108.6530990600586, 235.70350646972656, -28.989418029785156),
            (956147725249, -107.85179138183594, 242.70726013183594, -29.380075454711914),
            (956147735197, -107.18177032470703, 249.66525268554688, -29.693115234375),
            (956147744884, -105.91493225097656, 255.99728393554688, -30.429861068725586),
            (956147754625, -103.99987030029297, 262.05181884765625, -30.688085556030273),
            (956147764531, -101.80782318115234, 268.001220703125, -30.553754806518555),
            (956147774455, -99.34199523925781, 273.8106994628906, -30.183387756347656),
            (956147783928, -96.63365936279297, 278.8228759765625, -29.834545135498047),
            (956147793741, -93.66831970214844, 284.36181640625, -29.78094482421875),
            (956147803853, -90.26753234863281, 290.0521240234375, -29.26163673400879),
            (956147814036, -88.05581665039062, 296.7695007324219, -27.6107234954834),
            (956147823954, -84.89571380615234, 302.1167297363281, -26.62270164489746),
            (956147833250, -81.57225036621094, 307.0682067871094, -26.0574951171875),
            (956147843320, -77.24324798583984, 311.2476501464844, -25.968061447143555),
            (956147872551, -60.422760009765625, 322.59930419921875, -27.60739517211914),
            (956147882605, -56.245304107666016, 324.2779235839844, -28.7398738861084),
            (956147892550, -51.5107307434082, 326.1371154785156, -29.174001693725586),
            (956147902093, -46.56989288330078, 328.1951599121094, -29.58641242980957),
            (956147912121, -41.09356689453125, 330.0178527832031, -29.875877380371094),
            (956147921626, -35.82472229003906, 331.5932922363281, -29.914491653442383),
            (956147931655, -30.12885856628418, 332.943603515625, -29.747760772705078),
            (956147941537, -24.520490646362305, 334.1368408203125, -29.180410385131836),
            (956147951491, -18.881900787353516, 334.8070983886719, -28.74424171447754),
            (956147961390, -13.348847389221191, 335.21783447265625, -28.318767547607422),
            (956147971064, -7.829214096069336, 334.6902770996094, -27.874969482421875),
        ]
    ],
    "fish": [
        [
            (956447598854, -97.22578430175781, 162.2909393310547, -49.002174377441406),
            (956447609120, -94.87572479248047, 169.52122497558594, -51.3195915222168),
            (956447619383, -92.78771209716797, 177.43466186523438, -54.154415130615234),
            (956447629678, -89.95169830322266, 185.94796752929688, -55.45412826538086),
            (956447640227, -86.97586059570312, 194.9326629638672, -56.39397430419922),
            (956447650204, -84.21954345703125, 203.41371154785156, -57.457366943359375),
            (956447660814, -81.23347473144531, 212.783447265625, -58.4035758972168),
            (956447670781, -78.66730499267578, 221.89022827148438, -59.719970703125),
            (956447680774, -75.71636199951172, 231.1336669921875, -60.363372802734375),
            (956447691178, -72.6430892944336, 241.0271759033203, -60.947818756103516),
            (956447701617, -69.56731414794922, 251.36380004882812, -60.054664611816406),
            (956447711653, -66.43236541748047, 261.9562683105469, -59.48397445678711),
            (956447721828, -62.24532699584961, 272.9623718261719, -56.81729507446289),
            (956447732169, -57.29829788208008, 283.398193359375, -54.14130783081055),
            (956447742311, -52.44908905029297, 294.0985412597656, -51.727508544921875),
            (956447752573, -47.26887893676758, 305.62847900390625, -49.20745849609375),
            (956447762998, -41.162445068359375, 316.5575866699219, -45.78749465942383),
            (956447773240, -35.79729461669922, 328.1394348144531, -45.49940490722656),
            (956447783442, -29.711278915405273, 338.7965393066406, -44.814308166503906),
            (956447793685, -23.565773010253906, 349.4660949707031, -43.69969940185547),
            (956447803924, -16.609643936157227, 360.0750732421875, -43.03108215332031),
            (956447814431, -9.579882621765137, 369.76153564453125, -41.66169738769531),
            (956447824796, -0.8901739716529846, 378.72186279296875, -38.31339645385742),
            (956447834724, 7.177460193634033, 386.3091735839844, -35.3666877746582),
            (956447844948, 16.178245544433594, 393.3358459472656, -30.942916870117188),
            (956447855295, 24.89082908630371, 400.2232971191406, -27.26518440246582),
            (956447865430, 34.21382522583008, 405.72418212890625, -22.99503517150879),
            (956447875919, 43.72434616088867, 411.62841796875, -21.034082412719727),
            (956447886370, 52.63889694213867, 417.3377685546875, -19.719432830810547),
            (956447896224, 61.179039001464844, 420.4903564453125, -17.72736167907715),
            (956447906443, 70.68965911865234, 423.19696044921875, -16.28676414489746),
            (956447916772, 79.90672302246094, 423.3550109863281, -13.61453628540039),
            (956447927140, 89.92217254638672, 422.4296875, -10.89661979675293),
            (956447937381, 100.07710266113281, 422.21099853515625, -6.732049942016602),
            (956447947637, 110.17913818359375, 419.8342590332031, -2.035165548324585),
            (956447957771, 120.5407485961914, 417.85009765625, 0.7503149509429932),
            (956447968011, 130.6104278564453, 414.10400390625, 2.1096138954162598),
            (956447978302, 140.74063110351562, 408.0694885253906, 0.27743569016456604),
            (956447988517, 149.465087890625, 401.5486145019531, -0.18392866849899292),
            (956447998785, 157.80613708496094, 392.6702880859375, 0.7280908823013306),
            (956448009192, 165.21424865722656, 380.85430908203125, 2.7724125385284424),
            (956448039838, 189.0475311279297, 343.5346374511719, -1.8224806785583496),
            (956448050247, 193.0471649169922, 333.6537170410156, -0.627154529094696),
            (956448060501, 197.11328125, 321.8176574707031, 1.23634672164917),
            (956448070644, 200.67208862304688, 308.84344482421875, 3.207634449005127),
            (956448080851, 203.19737243652344, 294.69586181640625, 4.418442726135254),
            (956448091181, 205.50494384765625, 280.5777893066406, 5.851703643798828),
            (956448101467, 206.94772338867188, 266.200439453125, 6.858051776885986),
            (956448111692, 207.45928955078125, 251.88514709472656, 7.436669826507568),
            (956448122057, 207.02203369140625, 238.11483764648438, 8.131645202636719),
            (956448132492, 206.23965454101562, 224.93516540527344, 8.772871971130371),
            (956448142667, 204.38621520996094, 212.351318359375, 9.515687942504883),
            (956448152845, 201.7927703857422, 199.96389770507812, 8.570262908935547),
            (956448163146, 198.36341857910156, 188.17919921875, 8.642187118530273),
            (956448173373, 194.3321075439453, 176.86627197265625, 8.320850372314453),
            (956448183560, 190.39283752441406, 166.35562133789062, 7.790318965911865),
            (956448193778, 185.25721740722656, 156.21823120117188, 7.6490159034729),
            (956448204121, 180.0026092529297, 147.8986358642578, 7.2072319984436035),
            (956448214273, 174.47352600097656, 139.74119567871094, 6.119490146636963),
            (956448224514, 168.65060424804688, 131.6595916748047, 4.999003887176514),
            (956448235183, 162.7852020263672, 123.78660583496094, 2.4234511852264404),
            (956448245041, 155.9879608154297, 116.5649185180664, 0.46140846610069275),
            (956448255453, 147.7095489501953, 110.3471450805664, -2.3670315742492676),
            (956448265731, 141.03955078125, 107.3520278930664, -3.0340893268585205),
            (956448275844, 133.4310302734375, 104.34608459472656, -4.370108127593994),
            (956448286211, 125.1217041015625, 102.2391586303711, -5.874922275543213),
            (956448296546, 116.73279571533203, 100.90518188476562, -7.578948974609375),
            (956448306661, 107.90000915527344, 100.3108139038086, -9.894811630249023),
            (956448317036, 98.9023666381836, 100.84515380859375, -11.908295631408691),
            (956448327212, 89.99085998535156, 102.40054321289062, -14.223597526550293),
            (956448337651, 80.655029296875, 104.86507415771484, -17.166902542114258),
            (956448347867, 71.27408599853516, 107.6957778930664, -19.780248641967773),
            (956448358188, 61.80059814453125, 111.4690170288086, -21.980321884155273),
            (956448368321, 52.36552047729492, 116.52389526367188, -24.85443115234375),
            (956448378615, 42.63698959350586, 122.52570343017578, -27.560829162597656),
            (956448388909, 32.861141204833984, 129.23707580566406, -29.432950973510742),
            (956448399104, 22.851335525512695, 136.8988800048828, -31.93008041381836),
            (956448409315, 12.871561050415039, 145.1487579345703, -33.444820404052734),
            (956448419818, 2.827293872833252, 154.50892639160156, -34.544342041015625),
            (956448429923, -6.818460464477539, 164.0852813720703, -35.24296951293945),
            (956448440225, -16.722564697265625, 174.41513061523438, -35.293800354003906),
            (956448450451, -26.414670944213867, 185.1505126953125, -35.039772033691406),
            (956448460765, -36.22895050048828, 196.42771911621094, -35.45624923706055),
            (956448470779, -45.426780700683594, 207.2473602294922, -34.23617172241211),
            (956448481379, -55.1879997253418, 219.05918884277344, -33.82295608520508),
            (956448491382, -64.11993408203125, 230.15542602539062, -33.12073516845703),
            (956448501569, -73.33761596679688, 242.5896759033203, -32.064395904541016),
            (956448511984, -82.49429321289062, 255.0985565185547, -30.600435256958008),
            (956448522066, -90.81318664550781, 266.673583984375, -28.45682144165039),
            (956448532689, -100.04624938964844, 279.4454040527344, -27.321273803710938),
            (956448542574, -108.76342010498047, 291.7102355957031, -27.10093116760254),
            (956448552932, -118.20147705078125, 304.96575927734375, -26.196704864501953),
            (956448563188, -127.22234344482422, 317.9062194824219, -25.266986846923828),
            (956448573420, -134.75343322753906, 328.44427490234375, -21.701805114746094),
            (956448583773, -141.76504516601562, 339.3470153808594, -16.87786865234375),
            (956448593776, -150.9583740234375, 352.5718994140625, -17.571239471435547),
            (956448604106, -157.17433166503906, 363.20550537109375, -17.710140228271484),
            (956448614532, -164.51455688476562, 371.6866455078125, -11.718287467956543),
        ]
    ]
}


def plot_gesture(gesture: Gesture, label=None):
    plt.figure()
    gesture_arr = gesture.to_numpy()
    plt.scatter(gesture_arr[:, 1], gesture_arr[:, 2])
    if label is not None:
        plt.title(label)
    plt.show()


def create_normalized_database():
    db = GestureDatabase()
    db.clear_data()
    for label, templates in hardcoded_gestures.items():
        for template in templates:
            min_time = template[0][0]
            xs = [x for t, x, y, z in template]
            min_x, max_x = min(xs), max(xs)
            ys = [y for t, x, y, z in template]
            min_y, max_y = min(ys), max(ys)
            zs = [z for t, x, y, z in template]
            min_z, max_z = min(zs), max(zs)
            scale = max(max_x, max_y, max_z) - min(min_x, min_y, min_z)
            normalized_data = [
                (
                    t - min_time,
                    (x - min_x) / scale,
                    (y - min_y) / scale,
                    (z - min_z) / scale
                )
                for t, x, y, z in template
            ]
            normalized_gesture = Gesture(normalized_data)
            plot_gesture(normalized_gesture, label)
            db.add_template(label, normalized_gesture)
    db.save_data()


if __name__ == "__main__":
    create_normalized_database()
